<div class="month-selector-container">
  <mat-form-field appearance="fill" class="month-selector">
    <mat-label>Select Month</mat-label>
    <input
      matInput
      [matDatepicker]="datePicker"
      [(ngModel)]="selectedMonth"
      (dateChange)="onMonthChange()"
      [min]="minDate"
    />
    <mat-datepicker-toggle
      matSuffix
      [for]="datePicker"
    ></mat-datepicker-toggle>
    <mat-datepicker
      #datePicker
      startView="multi-year"
      [startAt]="selectedMonth"
      [dateClass]="dateClass"
    ></mat-datepicker>
  </mat-form-field>
</div>

<div class="calendar">
  <div
    class="calendar-day"
    role="button"
    *ngFor="let day of daysInMonth"
    (click)="openAppointmentForm(day)"
    [ngClass]="{ 'has-appointments': hasAppointments(day) }"
    [class.today]="isToday(day)"
  >
    <div class="day-header">
      <span class="day-number">{{ day | date : "d" }}</span>
      <span class="day-month">{{ day | date : "MMM" }}</span>
    </div>

    <div
      *ngFor="let appointment of appointments[day.toISOString()] || []"
      class="appointment"
    >
      <mat-icon>event</mat-icon>
      <div class="appointment-title">
        {{ appointment.title }} ({{ appointment.time }})
      </div>
    </div>
  </div>
</div>
